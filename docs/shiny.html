<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Shiny | Shiny App Workflows</title>
  <meta name="description" content="<p>This is a book that covers the standard shiny app
workflow.</p>" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Shiny | Shiny App Workflows" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a book that covers the standard shiny app
workflow.</p>" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Shiny | Shiny App Workflows" />
  
  <meta name="twitter:description" content="<p>This is a book that covers the standard shiny app
workflow.</p>" />
  

<meta name="author" content="Braeden Klaver" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="package-development.html"/>
<link rel="next" href="bslib.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Shiny App Workflows</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>1</b> Git</a><ul>
<li class="chapter" data-level="1.1" data-path="git.html"><a href="git.html#basic-workflow"><i class="fa fa-check"></i><b>1.1</b> Basic git workflow</a></li>
<li class="chapter" data-level="1.2" data-path="git.html"><a href="git.html#setting-up-github-or-gitlab-projects"><i class="fa fa-check"></i><b>1.2</b> Setting up Github or Gitlab projects</a><ul>
<li class="chapter" data-level="1.2.1" data-path="git.html"><a href="git.html#pre-existing-project-on-github-or-gitlab"><i class="fa fa-check"></i><b>1.2.1</b> Pre-existing project on Github or Gitlab</a></li>
<li class="chapter" data-level="1.2.2" data-path="git.html"><a href="git.html#personal-project-without-git"><i class="fa fa-check"></i><b>1.2.2</b> Personal project without git</a></li>
<li class="chapter" data-level="1.2.3" data-path="git.html"><a href="git.html#personal-project-with-git"><i class="fa fa-check"></i><b>1.2.3</b> Personal project with Git</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="git.html"><a href="git.html#collaborative-git-workflow"><i class="fa fa-check"></i><b>1.3</b> Collaborative git workflow</a></li>
<li class="chapter" data-level="1.4" data-path="git.html"><a href="git.html#using-git-at-the-bccdc"><i class="fa fa-check"></i><b>1.4</b> Using Git at the BCCDC</a><ul>
<li class="chapter" data-level="1.4.1" data-path="git.html"><a href="git.html#git-on-citrix"><i class="fa fa-check"></i><b>1.4.1</b> Git on Citrix</a></li>
<li class="chapter" data-level="1.4.2" data-path="git.html"><a href="git.html#git-locally"><i class="fa fa-check"></i><b>1.4.2</b> Git locally</a></li>
<li class="chapter" data-level="1.4.3" data-path="git.html"><a href="git.html#github"><i class="fa fa-check"></i><b>1.4.3</b> Github</a></li>
<li class="chapter" data-level="1.4.4" data-path="git.html"><a href="git.html#gitlab"><i class="fa fa-check"></i><b>1.4.4</b> Gitlab</a></li>
<li class="chapter" data-level="1.4.5" data-path="git.html"><a href="git.html#suggested-project-workflow"><i class="fa fa-check"></i><b>1.4.5</b> Suggested project workflow</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="git.html"><a href="git.html#basic-git-commands-summary"><i class="fa fa-check"></i><b>1.5</b> Basic Git Commands Summary</a></li>
<li class="chapter" data-level="1.6" data-path="git.html"><a href="git.html#additional-resources"><i class="fa fa-check"></i><b>1.6</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="package-development.html"><a href="package-development.html"><i class="fa fa-check"></i><b>2</b> Package Development</a><ul>
<li class="chapter" data-level="2.1" data-path="package-development.html"><a href="package-development.html#package-structure"><i class="fa fa-check"></i><b>2.1</b> Package Structure</a></li>
<li class="chapter" data-level="2.2" data-path="package-development.html"><a href="package-development.html#loading-devtools-and-usethis"><i class="fa fa-check"></i><b>2.2</b> Loading devtools and usethis</a></li>
<li class="chapter" data-level="2.3" data-path="package-development.html"><a href="package-development.html#load"><i class="fa fa-check"></i><b>2.3</b> <code>load_all</code> function</a></li>
<li class="chapter" data-level="2.4" data-path="package-development.html"><a href="package-development.html#desc"><i class="fa fa-check"></i><b>2.4</b> The <code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="2.5" data-path="package-development.html"><a href="package-development.html#documenting-your-functions"><i class="fa fa-check"></i><b>2.5</b> Documenting your functions</a></li>
<li class="chapter" data-level="2.6" data-path="package-development.html"><a href="package-development.html#the-namespace"><i class="fa fa-check"></i><b>2.6</b> The <code>NAMESPACE</code></a></li>
<li class="chapter" data-level="2.7" data-path="package-development.html"><a href="package-development.html#the-readme-file"><i class="fa fa-check"></i><b>2.7</b> The <code>README</code> file</a></li>
<li class="chapter" data-level="2.8" data-path="package-development.html"><a href="package-development.html#organizing-your-scripts"><i class="fa fa-check"></i><b>2.8</b> Organizing your scripts</a></li>
<li class="chapter" data-level="2.9" data-path="package-development.html"><a href="package-development.html#pkg-data"><i class="fa fa-check"></i><b>2.9</b> Using data in a package</a></li>
<li class="chapter" data-level="2.10" data-path="package-development.html"><a href="package-development.html#additional-resources-1"><i class="fa fa-check"></i><b>2.10</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>3</b> Shiny</a><ul>
<li class="chapter" data-level="3.1" data-path="shiny.html"><a href="shiny.html#app-structure"><i class="fa fa-check"></i><b>3.1</b> Shiny App Structure</a></li>
<li class="chapter" data-level="3.2" data-path="shiny.html"><a href="shiny.html#ui"><i class="fa fa-check"></i><b>3.2</b> UI</a><ul>
<li class="chapter" data-level="3.2.1" data-path="shiny.html"><a href="shiny.html#setting-up-the-ui"><i class="fa fa-check"></i><b>3.2.1</b> Setting up the UI</a></li>
<li class="chapter" data-level="3.2.2" data-path="shiny.html"><a href="shiny.html#layouts"><i class="fa fa-check"></i><b>3.2.2</b> Layouts</a></li>
<li class="chapter" data-level="3.2.3" data-path="shiny.html"><a href="shiny.html#themes"><i class="fa fa-check"></i><b>3.2.3</b> Themes</a></li>
<li class="chapter" data-level="3.2.4" data-path="shiny.html"><a href="shiny.html#ui-inputs"><i class="fa fa-check"></i><b>3.2.4</b> UI Inputs</a></li>
<li class="chapter" data-level="3.2.5" data-path="shiny.html"><a href="shiny.html#ui-outputs"><i class="fa fa-check"></i><b>3.2.5</b> UI Outputs</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="shiny.html"><a href="shiny.html#server"><i class="fa fa-check"></i><b>3.3</b> Server</a><ul>
<li class="chapter" data-level="3.3.1" data-path="shiny.html"><a href="shiny.html#server-inputs"><i class="fa fa-check"></i><b>3.3.1</b> Server Inputs</a></li>
<li class="chapter" data-level="3.3.2" data-path="shiny.html"><a href="shiny.html#server-outputs"><i class="fa fa-check"></i><b>3.3.2</b> Server Outputs</a></li>
<li class="chapter" data-level="3.3.3" data-path="shiny.html"><a href="shiny.html#react"><i class="fa fa-check"></i><b>3.3.3</b> Reactivity</a></li>
<li class="chapter" data-level="3.3.4" data-path="shiny.html"><a href="shiny.html#execution-order"><i class="fa fa-check"></i><b>3.3.4</b> Execution order</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="shiny.html"><a href="shiny.html#dynamic-ui"><i class="fa fa-check"></i><b>3.4</b> Dynamic UI</a></li>
<li class="chapter" data-level="3.5" data-path="shiny.html"><a href="shiny.html#basic-example"><i class="fa fa-check"></i><b>3.5</b> Basic example</a><ul>
<li class="chapter" data-level="3.5.1" data-path="shiny.html"><a href="shiny.html#set-up"><i class="fa fa-check"></i><b>3.5.1</b> Set up</a></li>
<li class="chapter" data-level="3.5.2" data-path="shiny.html"><a href="shiny.html#build-the-ui"><i class="fa fa-check"></i><b>3.5.2</b> Build the UI</a></li>
<li class="chapter" data-level="3.5.3" data-path="shiny.html"><a href="shiny.html#build-the-server"><i class="fa fa-check"></i><b>3.5.3</b> Build the server</a></li>
<li class="chapter" data-level="3.5.4" data-path="shiny.html"><a href="shiny.html#putting-it-all-together"><i class="fa fa-check"></i><b>3.5.4</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="shiny.html"><a href="shiny.html#deploying-to-shinyapps.io"><i class="fa fa-check"></i><b>3.6</b> Deploying to shinyapps.io</a></li>
<li class="chapter" data-level="3.7" data-path="shiny.html"><a href="shiny.html#packaging-a-shiny-app"><i class="fa fa-check"></i><b>3.7</b> Packaging a Shiny App</a><ul>
<li class="chapter" data-level="3.7.1" data-path="shiny.html"><a href="shiny.html#put-all-r-code-in-the-r-directory"><i class="fa fa-check"></i><b>3.7.1</b> Put all R code in the <code>R/</code> directory</a></li>
<li class="chapter" data-level="3.7.2" data-path="shiny.html"><a href="shiny.html#write-a-function-that-starts-your-app"><i class="fa fa-check"></i><b>3.7.2</b> Write a function that starts your app</a></li>
<li class="chapter" data-level="3.7.3" data-path="shiny.html"><a href="shiny.html#save-your-data-to-the-data-directory"><i class="fa fa-check"></i><b>3.7.3</b> Save your data to the <code>data/</code> directory</a></li>
<li class="chapter" data-level="3.7.4" data-path="shiny.html"><a href="shiny.html#create-an-inst-directory"><i class="fa fa-check"></i><b>3.7.4</b> Create an <code>inst/</code> directory</a></li>
<li class="chapter" data-level="3.7.5" data-path="shiny.html"><a href="shiny.html#create-a-www-directory"><i class="fa fa-check"></i><b>3.7.5</b> Create a <code>www/</code> directory</a></li>
<li class="chapter" data-level="3.7.6" data-path="shiny.html"><a href="shiny.html#create-a-description-file"><i class="fa fa-check"></i><b>3.7.6</b> Create a <code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="3.7.7" data-path="shiny.html"><a href="shiny.html#deploying-your-app-package"><i class="fa fa-check"></i><b>3.7.7</b> Deploying your app-package</a></li>
<li class="chapter" data-level="3.7.8" data-path="shiny.html"><a href="shiny.html#workflow"><i class="fa fa-check"></i><b>3.7.8</b> Workflow</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="shiny.html"><a href="shiny.html#additional-resources-2"><i class="fa fa-check"></i><b>3.8</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bslib.html"><a href="bslib.html"><i class="fa fa-check"></i><b>4</b> bslib</a><ul>
<li class="chapter" data-level="4.1" data-path="bslib.html"><a href="bslib.html#themes-1"><i class="fa fa-check"></i><b>4.1</b> Themes</a><ul>
<li class="chapter" data-level="4.1.1" data-path="bslib.html"><a href="bslib.html#bootswatch-themes"><i class="fa fa-check"></i><b>4.1.1</b> Bootswatch themes</a></li>
<li class="chapter" data-level="4.1.2" data-path="bslib.html"><a href="bslib.html#main-colours-and-fonts"><i class="fa fa-check"></i><b>4.1.2</b> Main colours and fonts</a></li>
<li class="chapter" data-level="4.1.3" data-path="bslib.html"><a href="bslib.html#additional-theming-tools"><i class="fa fa-check"></i><b>4.1.3</b> Additional theming tools</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="bslib.html"><a href="bslib.html#layouts-1"><i class="fa fa-check"></i><b>4.2</b> Layouts</a><ul>
<li class="chapter" data-level="4.2.1" data-path="bslib.html"><a href="bslib.html#multi-column"><i class="fa fa-check"></i><b>4.2.1</b> Multi-column</a></li>
<li class="chapter" data-level="4.2.2" data-path="bslib.html"><a href="bslib.html#multi-page"><i class="fa fa-check"></i><b>4.2.2</b> Multi-page</a></li>
<li class="chapter" data-level="4.2.3" data-path="bslib.html"><a href="bslib.html#multi-panel"><i class="fa fa-check"></i><b>4.2.3</b> Multi-panel</a></li>
<li class="chapter" data-level="4.2.4" data-path="bslib.html"><a href="bslib.html#scrolling-vs-filling"><i class="fa fa-check"></i><b>4.2.4</b> Scrolling vs filling</a></li>
<li class="chapter" data-level="4.2.5" data-path="bslib.html"><a href="bslib.html#mobile-layout"><i class="fa fa-check"></i><b>4.2.5</b> Mobile layout</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="bslib.html"><a href="bslib.html#components"><i class="fa fa-check"></i><b>4.3</b> Components</a><ul>
<li class="chapter" data-level="4.3.1" data-path="bslib.html"><a href="bslib.html#cards"><i class="fa fa-check"></i><b>4.3.1</b> Cards</a></li>
<li class="chapter" data-level="4.3.2" data-path="bslib.html"><a href="bslib.html#sidebars-1"><i class="fa fa-check"></i><b>4.3.2</b> Sidebars</a></li>
<li class="chapter" data-level="4.3.3" data-path="bslib.html"><a href="bslib.html#value-boxes"><i class="fa fa-check"></i><b>4.3.3</b> Value boxes</a></li>
<li class="chapter" data-level="4.3.4" data-path="bslib.html"><a href="bslib.html#tooltips-and-popovers"><i class="fa fa-check"></i><b>4.3.4</b> Tooltips and Popovers</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="bslib.html"><a href="bslib.html#basic-example-with-bslib"><i class="fa fa-check"></i><b>4.4</b> Basic Example with <code>bslib</code></a></li>
<li class="chapter" data-level="4.5" data-path="bslib.html"><a href="bslib.html#additional-resources-3"><i class="fa fa-check"></i><b>4.5</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modularization.html"><a href="modularization.html"><i class="fa fa-check"></i><b>5</b> Modularization</a><ul>
<li class="chapter" data-level="5.1" data-path="modularization.html"><a href="modularization.html#section"><i class="fa fa-check"></i><b>5.1</b> </a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Shiny App Workflows</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shiny" class="section level1 hasAnchor">
<h1><span class="header-section-number">3</span> Shiny<a href="shiny.html#shiny" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Shiny is an R package that allows you to easily create rich, interactive web apps. Shiny allows you to take your work in R and expose it via a web browser so that anyone can use it. Shiny makes you look awesome by making it easy to produce polished web apps with a minimum amount of pain (but there will be some pain).</p>
<div id="app-structure" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.1</span> Shiny App Structure<a href="shiny.html#app-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Shiny apps are composed of two main elements:</p>
<p><strong>UI:</strong> This is where you define the layout and appearance of your app, including sliders, plots, tabs, etc.</p>
<p><strong>The server:</strong> This is where you connect your UI components using logic behind the scenes to drive app behaviour.</p>
<p>These two elements are combined to render a shiny app by calling <code>shiny::shinyApp(ui = ui, server = server)</code>.</p>
</div>
<div id="ui" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.2</span> UI<a href="shiny.html#ui" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="setting-up-the-ui" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.1</span> Setting up the UI<a href="shiny.html#setting-up-the-ui" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To create a shiny app you must create a UI. Traditionally, in shiny you do this using the functions <code>shiny::fluidPage()</code> or <code>shiny::navbarPage()</code>. The UI will contain elements such as calls to CSS stylings, overall UI design, inputs, and outputs.</p>
</div>
<div id="layouts" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.2</span> Layouts<a href="shiny.html#layouts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the main things you will set up in the UI is the overall layout and theme. Shiny gives you multiple tools to craft your layout including:</p>
<ul>
<li><a href="https://mastering-shiny.org/action-layout.html#page-with-sidebar">Sidebars</a></li>
<li><a href="https://mastering-shiny.org/action-layout.html#multi-row">Page Rows and columns</a></li>
<li><a href="https://mastering-shiny.org/action-layout.html#tabsets">Tabs</a></li>
<li><a href="https://mastering-shiny.org/action-layout.html#navlists-and-navbars">Navigation lists and bars</a></li>
</ul>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-12"></span>
<img src="images/ui-layout.png" alt="Structure of a basic app with sidebar" width="514" />
<p class="caption">
Figure 3.1: Structure of a basic app with sidebar
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-13"></span>
<img src="images/multirow.png" alt="The structure underlying a simple multi-row app" width="514" />
<p class="caption">
Figure 3.2: The structure underlying a simple multi-row app
</p>
</div>
</div>
<div id="themes" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.3</span> Themes<a href="shiny.html#themes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Beyond the layout, you can also set a theme for your app. Currently, the easiest way to do this is to use the <code>bslib</code> package and set the theme by calling <code>bslib::bs_theme()</code>. There are a number of preset themes you can use, but you are also free to customize your own theme using this function. Read more on themes <a href="https://mastering-shiny.org/action-layout.html#getting-started">here</a>.</p>
<p>You can further tweak your app’s look by using custom CSS stylings and by incorporating html code into your UI call. Read more about that <a href="https://shiny.posit.co/r/articles/build/css/">here</a>.</p>
</div>
<div id="ui-inputs" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.4</span> UI Inputs<a href="shiny.html#ui-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a number of inputs that you can use in shiny apps such as <code>shiny::radioButtons()</code>, <code>shiny::selectInput()</code>, <code>shiny::actionButton()</code>, and <code>shiny::dateRangeInput()</code>. These allow users to interact and dictate what appears in our app. Check out the all of the potential inputs <a href="https://rstudio.github.io/cheatsheets/html/shiny.html#inputs">here</a>.</p>
<p>These functions all share a two main arguments:</p>
<ul>
<li><code>inputID</code>: This is the identifier used to connect the front end with the back end; if your UI has an input with ID “name”, the server function will access it with <code>input$name</code>.<br />
</li>
<li><code>label</code>: This is used to create a human-readable label for the control (ie. “Select Geography”).</li>
</ul>
<div class="notebox">
<div class="center">
<p><strong>NOTE</strong></p>
</div>
<p>The <code>inputId</code> has two constraints:</p>
<ul>
<li><p>It must be a simple string that contains only letters, numbers, and underscores (no spaces, dashes, periods, or other special characters allowed!). Name it like you would name a variable in R.</p></li>
<li><p>It must be unique. If it’s not unique, you’ll have no way to refer to this control in your server function!</p></li>
</ul>
</div>
<p><br>
<a href="https://mastering-shiny.org/basic-ui.html#inputs">Read more!</a></p>
</div>
<div id="ui-outputs" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.5</span> UI Outputs<a href="shiny.html#ui-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the UI we can also specify the outputs that we’d like to include, for example plots, text, or tables; check out the <a href="https://rstudio.github.io/cheatsheets/html/shiny.html#outputs">cheatsheet</a> for a list of <code>Output()</code> functions. In essence, these are ‘placeholders’, which will be filled in based on what we define in our server. Similar to inputs, we must also specify an <code>outputID</code> as the first argument.</p>
<p><a href="https://mastering-shiny.org/basic-ui.html#outputs">Read more!</a></p>
</div>
</div>
<div id="server" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.3</span> Server<a href="shiny.html#server" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On the server side, we build the logic that will power our app. Specifically, we need to fill our outputs and link them to the corresponding inputs if required. We do this by using a different suite of functions that will dictate what we fill our outputs with and using reactivity elements to link inputs to outputs.</p>
<div id="server-inputs" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.1</span> Server Inputs<a href="shiny.html#server-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Inputs are essentially data sent from the browser (ie. UI) to the server, which can be accessed by calling <code>input$inputID</code>. Because these are dictated on the browser side, these values are not modifiable (ie. they are read-only) within the server.</p>
<p>The other important point about inputs is we inherently want to use them in a “reactive” context; in other words, we want to have logic that reacts to user input to drive behaviour on the backend to cause some kind of update to the frontend browser. More on this in section <a href="shiny.html#react">3.3.3</a>.</p>
<p><a href="https://mastering-shiny.org/basic-reactivity.html#input">Read more!</a></p>
</div>
<div id="server-outputs" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.2</span> Server Outputs<a href="shiny.html#server-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Similar to inputs we refer to outputs using their output IDs by calling <code>output$outputID</code>. However, as you may have guessed, instead of receiving inputs from the browser, we are providing outputs to fill in the UI “placeholders”. Outputs are always created using <code>render</code> functions, these may be wrapped in in reactive statements so that they update depending on inputs or they can be stand alone outputs that aren’t connected to any inputs.</p>
<p><a href="https://mastering-shiny.org/basic-reactivity.html#output">Read more!</a></p>
</div>
<div id="react" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.3</span> Reactivity<a href="shiny.html#react" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reactivity is what brings everything together in an app. This is where we can use user inputs to update UI and outputs. There are many different types of reactive functions for different purposes; you can make UI and ouputs update in real time, when you click a button, or under other conditions! This is called declarative programming when you set certain constraints and let the program (the server logic) determine when to execute under those constraints. Interestingly, shiny operates lazily, in other words, it will only do the minimum work required to get the job done and only when it has to. We are basically telling shiny to:</p>
<blockquote>
<p>“Ensure there is a sandwich in the refrigerator whenever I look inside of it”</p>
</blockquote>
<br>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-14"></span>
<img src="images/reactivity-diagram.png" alt="The different reactive functions and how they operate." width="578" />
<p class="caption">
Figure 3.3: The different reactive functions and how they operate.
</p>
</div>
<p><a href="https://mastering-shiny.org/basic-reactivity.html#reactive-programming">Read more!</a></p>
</div>
<div id="execution-order" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.3.4</span> Execution order<a href="shiny.html#execution-order" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prepare yourself, this is where we begin to flip all of our coding knowledge on its head. Unlike regular scripts where we expect R to execute things orderly, line by line, shiny server logic doesn’t function this way.. Instead, shiny will only execute specific lines of the server when it has what it needs for that line. For example:</p>
<p>This:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb9-2" title="2">  output<span class="op">$</span>greeting &lt;-<span class="st"> </span><span class="kw">renderText</span>(<span class="kw">string</span>())</a>
<a class="sourceLine" id="cb9-3" title="3">  string &lt;-<span class="st"> </span><span class="kw">reactive</span>(<span class="kw">paste0</span>(<span class="st">&quot;Hello &quot;</span>, input<span class="op">$</span>name, <span class="st">&quot;!&quot;</span>))</a>
<a class="sourceLine" id="cb9-4" title="4">}</a></code></pre></div>
<p>will result in the same output as this:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb10-2" title="2">  string &lt;-<span class="st"> </span><span class="kw">reactive</span>(<span class="kw">paste0</span>(<span class="st">&quot;Hello &quot;</span>, input<span class="op">$</span>name, <span class="st">&quot;!&quot;</span>))</a>
<a class="sourceLine" id="cb10-3" title="3">  output<span class="op">$</span>greeting &lt;-<span class="st"> </span><span class="kw">renderText</span>(<span class="kw">string</span>())</a>
<a class="sourceLine" id="cb10-4" title="4">}</a></code></pre></div>
<div class="tipbox">
<div class="center">
<p><strong>TIP</strong></p>
</div>
<p>It’s still recommended to have things in order to avoid confusion. But I think it’s an important thing to realize, because it highlights what is truly going on in the background and what makes shiny “lazy”.</p>
</div>
</div>
</div>
<div id="dynamic-ui" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.4</span> Dynamic UI<a href="shiny.html#dynamic-ui" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We won’t dive too deeply into dynamic UI elements. They essentially function as typical UI inputs, however, they can be used to update the UI by other inputs in a reactive function. This is similar to how we can use inputs to update outputs, except in this case the output is a UI element.</p>
<p><a href="https://mastering-shiny.org/action-dynamic.html#action-dynamic">Read more!</a></p>
</div>
<div id="basic-example" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.5</span> Basic example<a href="shiny.html#basic-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="set-up" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.5.1</span> Set up<a href="shiny.html#set-up" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First we need to do some prep before we build our app. Let’s load our libraries:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">library</span>(bslib)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">library</span>(datasets)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<div class="notebox">
<div class="center">
<p><strong>NOTE</strong></p>
</div>
<p>This is also where we would load datasets, set up global variables, and add paths if we need them for the app. Because this app is super simple we will just load our libraries.</p>
</div>
</div>
<div id="build-the-ui" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.5.2</span> Build the UI<a href="shiny.html#build-the-ui" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s create a simple UI with <code>shiny::navbarPage()</code> so we have tabs up top, we’ll make one dropdown menu, a couple of plots side by side, and a table that shows the data that is being used in the plots.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">ui &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">navbarPage</span>(</a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="co"># Let&#39;s set up our title for the page</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">title =</span> <span class="st">&#39;Appy Hour&#39;</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="co"># Create a drop down list of the flower species</span></a>
<a class="sourceLine" id="cb12-5" title="5">  shiny<span class="op">::</span><span class="kw">selectInput</span>(</a>
<a class="sourceLine" id="cb12-6" title="6">    <span class="st">&#39;species&#39;</span>,</a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="dt">label =</span> <span class="st">&#39;Select Species:&#39;</span>,</a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="dt">choices =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb12-9" title="9">      <span class="kw">unique</span>(</a>
<a class="sourceLine" id="cb12-10" title="10">        datasets<span class="op">::</span>iris<span class="op">$</span>Species</a>
<a class="sourceLine" id="cb12-11" title="11">      )</a>
<a class="sourceLine" id="cb12-12" title="12">    )</a>
<a class="sourceLine" id="cb12-13" title="13">  ),</a>
<a class="sourceLine" id="cb12-14" title="14">  <span class="co"># Set up our first tab, which will be for our plot</span></a>
<a class="sourceLine" id="cb12-15" title="15">  shiny<span class="op">::</span><span class="kw">tabPanel</span>(</a>
<a class="sourceLine" id="cb12-16" title="16">    <span class="dt">title =</span> <span class="st">&#39;Plot&#39;</span>,</a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="co"># Let&#39;s make two plots but I want them side-by-side so we need to use fluidRow()</span></a>
<a class="sourceLine" id="cb12-18" title="18">    shiny<span class="op">::</span><span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb12-19" title="19">      <span class="co"># Within our fluidRow we want two columns that are evenly split </span></a>
<a class="sourceLine" id="cb12-20" title="20">      <span class="co"># (remember 12 is the whole width)</span></a>
<a class="sourceLine" id="cb12-21" title="21">      shiny<span class="op">::</span><span class="kw">column</span>(</a>
<a class="sourceLine" id="cb12-22" title="22">        <span class="dv">6</span>,  </a>
<a class="sourceLine" id="cb12-23" title="23">        shiny<span class="op">::</span><span class="kw">plotOutput</span>(</a>
<a class="sourceLine" id="cb12-24" title="24">          <span class="dt">outputId =</span> <span class="st">&#39;plot1&#39;</span></a>
<a class="sourceLine" id="cb12-25" title="25">        )</a>
<a class="sourceLine" id="cb12-26" title="26">      ),</a>
<a class="sourceLine" id="cb12-27" title="27">      shiny<span class="op">::</span><span class="kw">column</span>(</a>
<a class="sourceLine" id="cb12-28" title="28">        <span class="dv">6</span>,  </a>
<a class="sourceLine" id="cb12-29" title="29">        shiny<span class="op">::</span><span class="kw">plotOutput</span>(</a>
<a class="sourceLine" id="cb12-30" title="30">          <span class="dt">outputId =</span> <span class="st">&#39;plot2&#39;</span></a>
<a class="sourceLine" id="cb12-31" title="31">        )</a>
<a class="sourceLine" id="cb12-32" title="32">      )</a>
<a class="sourceLine" id="cb12-33" title="33">    )</a>
<a class="sourceLine" id="cb12-34" title="34">  ),</a>
<a class="sourceLine" id="cb12-35" title="35">  <span class="co"># Set up our second tab, which will be for our table</span></a>
<a class="sourceLine" id="cb12-36" title="36">  shiny<span class="op">::</span><span class="kw">tabPanel</span>(</a>
<a class="sourceLine" id="cb12-37" title="37">    <span class="st">&#39;Table&#39;</span>,</a>
<a class="sourceLine" id="cb12-38" title="38">    shiny<span class="op">::</span><span class="kw">tableOutput</span>(</a>
<a class="sourceLine" id="cb12-39" title="39">      <span class="dt">outputId =</span> <span class="st">&#39;table1&#39;</span></a>
<a class="sourceLine" id="cb12-40" title="40">    )</a>
<a class="sourceLine" id="cb12-41" title="41">  )</a>
<a class="sourceLine" id="cb12-42" title="42">)</a></code></pre></div>
</div>
<div id="build-the-server" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.5.3</span> Build the server<a href="shiny.html#build-the-server" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now let’s connect everything. We need to use a reactive function to tell shiny to update our plots and table when a new flower species is selected. We also need to fill our plot and table placeholders with render functions.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb13-2" title="2">  </a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="co"># We need to set up a reactive wrapper, given we are only changing our plot </span></a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="co"># and table as a result of the change of the input</span></a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="co"># for our species the observeEvent() should work perfectly.</span></a>
<a class="sourceLine" id="cb13-6" title="6">  shiny<span class="op">::</span><span class="kw">observeEvent</span>(</a>
<a class="sourceLine" id="cb13-7" title="7">    input<span class="op">$</span>species,</a>
<a class="sourceLine" id="cb13-8" title="8">    {</a>
<a class="sourceLine" id="cb13-9" title="9">      <span class="co"># Filter our data based on the inputs from the UI</span></a>
<a class="sourceLine" id="cb13-10" title="10">      data &lt;-<span class="st"> </span>datasets<span class="op">::</span>iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">filter</span>(</a>
<a class="sourceLine" id="cb13-12" title="12">          Species <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>species</a>
<a class="sourceLine" id="cb13-13" title="13">        )</a>
<a class="sourceLine" id="cb13-14" title="14">      </a>
<a class="sourceLine" id="cb13-15" title="15">      <span class="co"># Then because we have outputs we need the corresponding </span></a>
<a class="sourceLine" id="cb13-16" title="16">      <span class="co"># render functions (plot and table) and create our outputs </span></a>
<a class="sourceLine" id="cb13-17" title="17">      <span class="co"># within those and assign them to the placeholders in the UI</span></a>
<a class="sourceLine" id="cb13-18" title="18">      output<span class="op">$</span>plot1 &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">renderPlot</span>(</a>
<a class="sourceLine" id="cb13-19" title="19">        <span class="kw">plot</span>(data<span class="op">$</span>Petal.Length, data<span class="op">$</span>Petal.Width)</a>
<a class="sourceLine" id="cb13-20" title="20">      )</a>
<a class="sourceLine" id="cb13-21" title="21">      </a>
<a class="sourceLine" id="cb13-22" title="22">      output<span class="op">$</span>plot2 &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">renderPlot</span>(</a>
<a class="sourceLine" id="cb13-23" title="23">        <span class="kw">plot</span>(data<span class="op">$</span>Sepal.Length, data<span class="op">$</span>Sepal.Width)</a>
<a class="sourceLine" id="cb13-24" title="24">      )</a>
<a class="sourceLine" id="cb13-25" title="25">      </a>
<a class="sourceLine" id="cb13-26" title="26">      output<span class="op">$</span>table1 &lt;-<span class="st"> </span>shiny<span class="op">::</span><span class="kw">renderTable</span>(</a>
<a class="sourceLine" id="cb13-27" title="27">        data</a>
<a class="sourceLine" id="cb13-28" title="28">      )</a>
<a class="sourceLine" id="cb13-29" title="29">    }</a>
<a class="sourceLine" id="cb13-30" title="30">  )</a>
<a class="sourceLine" id="cb13-31" title="31">  </a>
<a class="sourceLine" id="cb13-32" title="32">}</a></code></pre></div>
<div class="notebox">
<div class="center">
<p><strong>NOTE</strong></p>
</div>
<p>Remember, the server function requires the same three arguments everytime: <code>input</code>, <code>output</code>, and <code>session</code>.</p>
</div>
</div>
<div id="putting-it-all-together" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.5.4</span> Putting it all together<a href="shiny.html#putting-it-all-together" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we’re finally ready to deploy locally!</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
</div>
</div>
<div id="deploying-to-shinyapps.io" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.6</span> Deploying to shinyapps.io<a href="shiny.html#deploying-to-shinyapps.io" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At the BCCDC we have a <a href="https://www.shinyapps.io/">shinyapps.io</a> account that allows up to publish our apps to their servers. We can set these to be publically viewable, as well as private. Typically, privately deployed apps are for development purposes or previewing prior to public release. To deploy the app you just need to call two functions like so:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">rsconnect<span class="op">::</span><span class="kw">setAccountInfo</span>(</a>
<a class="sourceLine" id="cb15-2" title="2">      <span class="dt">name   =</span> <span class="st">&#39;bccdc&#39;</span>,</a>
<a class="sourceLine" id="cb15-3" title="3">      <span class="dt">token  =</span> <span class="st">&#39;07A000A33C5EF3D9EDAA3D1CA53339EF&#39;</span>,</a>
<a class="sourceLine" id="cb15-4" title="4">      <span class="dt">secret =</span> <span class="st">&#39;C2XOcD2ib8Kl2j07icXz9BnZc7DnwKxm9z7PJEz2&#39;</span></a>
<a class="sourceLine" id="cb15-5" title="5">    )</a>
<a class="sourceLine" id="cb15-6" title="6"></a>
<a class="sourceLine" id="cb15-7" title="7">rsconnect<span class="op">::</span><span class="kw">deployApp</span>(</a>
<a class="sourceLine" id="cb15-8" title="8">      <span class="dt">appName  =</span> <span class="st">&quot;myApp&quot;</span>,</a>
<a class="sourceLine" id="cb15-9" title="9">      <span class="dt">appId    =</span> <span class="st">&quot;This ID gets generated after the initial push to shiny servers&quot;</span>,</a>
<a class="sourceLine" id="cb15-10" title="10">      <span class="dt">appDir   =</span> <span class="kw">getwd</span>(),</a>
<a class="sourceLine" id="cb15-11" title="11">      <span class="dt">account  =</span> <span class="st">&#39;bccdc&#39;</span>,</a>
<a class="sourceLine" id="cb15-12" title="12">      <span class="dt">upload   =</span> T,</a>
<a class="sourceLine" id="cb15-13" title="13">      <span class="dt">logLevel =</span> <span class="st">&#39;verbose&#39;</span>,</a>
<a class="sourceLine" id="cb15-14" title="14">      <span class="dt">appVisibility =</span> <span class="kw">c</span>(<span class="st">&quot;public&quot;</span>, <span class="st">&quot;private&quot;</span>),</a>
<a class="sourceLine" id="cb15-15" title="15">      <span class="dt">forceUpdate =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb15-16" title="16">    )</a></code></pre></div>
</div>
<div id="packaging-a-shiny-app" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.7</span> Packaging a Shiny App<a href="shiny.html#packaging-a-shiny-app" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using package structure for a shiny app gets your toes into the water of package development. It’s a long way from a complete package, but it’s still useful because it activates new tools that make it easier to work with larger app and provides you with standard conventions that can be used across projects.</p>
<div id="put-all-r-code-in-the-r-directory" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.1</span> Put all R code in the <code>R/</code> directory<a href="shiny.html#put-all-r-code-in-the-r-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Because we are going to be working in an app-package we need to create an <code>R/</code> directory. This is where we will keep all of the core R code components that will build our app. As a reminder, in a package we are leveraging useful tools like <code>devtools::load_all()</code> (See section <a href="package-development.html#load">2.3</a>), which will load/run all of the code in the <code>R/</code> directory.</p>
</div>
<div id="write-a-function-that-starts-your-app" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.2</span> Write a function that starts your app<a href="shiny.html#write-a-function-that-starts-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As mentioned in section <a href="shiny.html#app-structure">3.1</a>, we need three primary pieces to create an app:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb16-2" title="2">  ...</a>
<a class="sourceLine" id="cb16-3" title="3">)</a>
<a class="sourceLine" id="cb16-4" title="4"></a>
<a class="sourceLine" id="cb16-5" title="5">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb16-6" title="6">  ...</a>
<a class="sourceLine" id="cb16-7" title="7">}</a>
<a class="sourceLine" id="cb16-8" title="8"></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="kw">shinyApp</span>(ui, server, ...)</a></code></pre></div>
<p>Now, to begin converting our project to a package-app we must wrap these three things into a function:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">myApp &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb17-2" title="2">  ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb17-3" title="3">    ...</a>
<a class="sourceLine" id="cb17-4" title="4">  )</a>
<a class="sourceLine" id="cb17-5" title="5">  server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb17-6" title="6">    ...</a>
<a class="sourceLine" id="cb17-7" title="7">  }</a>
<a class="sourceLine" id="cb17-8" title="8">  <span class="kw">shinyApp</span>(ui, server, ...)</a>
<a class="sourceLine" id="cb17-9" title="9">}</a></code></pre></div>
<div class="notebox">
<div class="center">
<p><strong>NOTE</strong></p>
</div>
<p>The function you create shouldn’t need any arguments, all that we will use this for is to easily run our app locally and set it up for easy deployment later by simply calling <code>myApp()</code>.</p>
</div>
</div>
<div id="save-your-data-to-the-data-directory" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.3</span> Save your data to the <code>data/</code> directory<a href="shiny.html#save-your-data-to-the-data-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We may have some datasets or lists that we use in our app that <strong>aren’t</strong> routinely updated. These are perfect candidates to convert into <code>.rda</code> files using the handy function <code>usethis::use_data()</code> that we talked about in section <a href="package-development.html#pkg-data">2.9</a>. These will automatically be stored in the <code>data/</code> directory and can be easily called directly after running <code>load_all()</code>.</p>
<div class="tipbox">
<div class="center">
<p><strong>TIP</strong></p>
</div>
<p>Good candidates for us include things like crosswalk files for health geographies, age categories, and lists (domains, diseases, regions).</p>
</div>
</div>
<div id="create-an-inst-directory" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.4</span> Create an <code>inst/</code> directory<a href="shiny.html#create-an-inst-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>inst/</code> directory is where we can store other raw datasets that are more subject to change, for example the data used to feed our apps that comes from external pipelines. There is no standard convention so you can name things as you please, but common usage includes folders named <code>inst/extdata</code> or <code>inst/ext</code> to store these datasets.</p>
<div class="notebox">
<div class="center">
<p><strong>NOTE</strong></p>
</div>
<p>To load data we need to use <code>system.file()</code> to point to our data’s location, as well as setting the <code>package</code> arugment to our project’s name.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">myApp &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="kw">read.csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;mydata.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;myApp&quot;</span>))</a>
<a class="sourceLine" id="cb18-3" title="3">  ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb18-4" title="4">    ...</a>
<a class="sourceLine" id="cb18-5" title="5">  )</a>
<a class="sourceLine" id="cb18-6" title="6">  server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb18-7" title="7">    ...</a>
<a class="sourceLine" id="cb18-8" title="8">  }</a>
<a class="sourceLine" id="cb18-9" title="9">  <span class="kw">shinyApp</span>(ui, server, ...)</a>
<a class="sourceLine" id="cb18-10" title="10">}</a></code></pre></div>
<p>Notice that our package-app automatically knows to look in our <code>inst/</code> folder?</p>
</div>
</div>
<div id="create-a-www-directory" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.5</span> Create a <code>www/</code> directory<a href="shiny.html#create-a-www-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This directory is where you can store some of the other non-script or data components to the app such as CSS stylings or images. There are no rules to this but a suggestion would be to have a <code>www/css</code> and <code>www/images</code> sub-directory scheme for your app.</p>
<div class="tipbox">
<div class="center">
<p><strong>TIP</strong></p>
</div>
<p>If you want to call files from within these sub-directories (eg. <code>href = "css/style.css"</code>) you will need to tell your app where they are:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">myApp &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb19-2" title="2">  shiny<span class="op">::</span><span class="kw">addResourcePath</span>(<span class="st">&quot;css&quot;</span>, <span class="kw">file.path</span>(<span class="kw">getwd</span>(), <span class="st">&quot;www/css&quot;</span>))</a>
<a class="sourceLine" id="cb19-3" title="3">  shiny<span class="op">::</span><span class="kw">addResourcePath</span>(<span class="st">&quot;images&quot;</span>, <span class="kw">file.path</span>(<span class="kw">getwd</span>(), <span class="st">&quot;www/images&quot;</span>))</a>
<a class="sourceLine" id="cb19-4" title="4">  ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb19-5" title="5">    ...</a>
<a class="sourceLine" id="cb19-6" title="6">  )</a>
<a class="sourceLine" id="cb19-7" title="7">  server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb19-8" title="8">    ...</a>
<a class="sourceLine" id="cb19-9" title="9">  }</a>
<a class="sourceLine" id="cb19-10" title="10">  <span class="kw">shinyApp</span>(ui, server, ...)</a>
<a class="sourceLine" id="cb19-11" title="11">}</a></code></pre></div>
</div>
</div>
<div id="create-a-description-file" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.6</span> Create a <code>DESCRIPTION</code> file<a href="shiny.html#create-a-description-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Because we are working in a package environment one of the critical components will be our <code>DESCRIPTION</code> file, which was discussed in section <a href="package-development.html#desc">2.4</a>.</p>
<p>Normally when you deploy an app, the rsconnect package automatically figures out all of the packages your code uses. But because we are making a package-app with a <code>DESCRIPTION</code> file, it requires you to explicitly specify them. The easiest way to do this is to call <code>usethis::use_package()</code>. You’ll need to start with shiny and pkgload:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb20-2" title="2">usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;pkgload&quot;</span>)</a></code></pre></div>
</div>
<div id="deploying-your-app-package" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.7</span> Deploying your app-package<a href="shiny.html#deploying-your-app-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the final pieces to setting up your app-package is the <code>app.R</code> script. This is what will be used when we go to deploy our app to the server and contains two simple but important lines of code:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">pkgload<span class="op">::</span><span class="kw">load_all</span>(<span class="st">&quot;.&quot;</span>)</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">myApp</span>()</a></code></pre></div>
<div class="warnbox">
<div class="center">
<p><strong>WARNING</strong></p>
</div>
<p>Although this is an R script, we <strong>DO NOT</strong> place this under our <code>R/</code> directory. This would result in an infinite loop when running <code>load_all()</code> due to the <code>load_all()</code> function in the script! Therefore place this at the top-level of your project directory.</p>
</div>
<p><a href="https://mastering-shiny.org/scaling-packaging.html#deploying-your-app-package">Read more!</a></p>
</div>
<div id="workflow" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.7.8</span> Workflow<a href="shiny.html#workflow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Putting your app code into the package structure unlocks a new workflow:</p>
<ul>
<li><p>Re-load all code in the app with <code>Cmd/Ctrl + Shift + L</code>. This calls <code>devtools::load_all()</code> which automatically saves all open files, <code>source()</code>s every file in <code>R/</code>, loads all datasets in <code>data/</code> then puts your cursor in the console.</p></li>
<li><p>Re-run the app with <code>myApp()</code>.</p></li>
</ul>
<p><a href="https://mastering-shiny.org/scaling-packaging.html#workflow">Read more!</a></p>
</div>
</div>
<div id="additional-resources-2" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.8</span> Additional Resources<a href="shiny.html#additional-resources-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://mastering-shiny.org/">Shiny Manual</a><br />
</li>
<li><a href="https://rstudio.github.io/cheatsheets/html/shiny.html">Shiny Cheatsheet</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="package-development.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bslib.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-shiny.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
